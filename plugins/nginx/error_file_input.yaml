#TODO is it worth including parameters, since this isn't necessarily meant for direct usage?

# Set Defaults
# {{$path := default "/var/log/nginx/error.log*" .error_log_path}}
# {{$start_at := default "end" .start_at}}

# Pipeline Template
pipeline:
  - type: file_input
    include:
      - '{{ $path }}'
    start_at: '{{ $start_at }}'
    multiline:
      line_start_pattern: '\d{4}/\d{2}/\d{2} \d{2}:\d{2}:\d{2} \[\w+\] (?P<pid>\d+).(?P<tid>\d+): '
    labels:
      log_type: 'nginx.error'
      plugin_id: '{{ .id }}'
    output: {{ .output }}
